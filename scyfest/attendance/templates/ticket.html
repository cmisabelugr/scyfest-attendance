{% extends "base.html" %}
{% load static %}
{% block content %}
<div class="d-md-flex h-md-100 align-items-center bg-fest">
    <img src="{% static 'img/home/header.png' %}" class="fest-header">

    <div class="container-sm text-center">
        <div class="card mb-3"
             style="margin-left:auto;
                    margin-right:auto;
                    margin-top:1em;
                    max-width: 540px;">
            <div class="row g-0">
                <div class="col-md-4">
                    <div class="overlay has-bg-img rounded h-10rem my-2 mt-3">
                        <img src="{% static 'img/perfil_defecto.png' %}"
                             id="profile-img"
                             class="bg-img img-fluid rounded-start "
                             alt="...">
                        {% comment %} <div class="overlay-content align-items-end text-white">
                            <a id="edit-icon-container" href="{% url 'test_view' %}">
                                <img id="edit-icon" src="{% static 'img/edit-solid.svg' %}">
                            </a>
                        </div> {% endcomment %}
                    </div>
                </div>
                <div class="col-md-8">
                    <div class="card-body">
                        <h5 class="card-title" id="nameLabel">
                            <span id="nameLabelText">{{ ticket.name }}</span>
                            <img id="editNameIcon" src="{% static 'img/edit-solid.svg' %}" class="edit-icon">
                        </h5>
                        <h5 class="card-title">
                            <input type="text" class="form-control" id="nameInput"/>
                        </h5>
                        <p class="card-text fest-points-pre mb-0 mt-4">
                            Actualmente tienes
                        </p>
                        <h5 class="text-info fest-points mt-0">
                            {{ticket.get_points}} puntos <i class="fa-solid fa-pen-to-square"></i>
                        </h5>
                        <h5 class="text-info fest-points mt-0">
                            {{ticket.get_boothpoints}} tickets de fotomatón <i class="fa-solid fa-pen-to-square"></i>
                        </h5>
                        <a href="{% url "ticket_history" ticket.qr_text %}" class="btn btn-primary mt-3 mb-3">VER HISTÓRICO</a>
                    </div>
                </div>
            </div>
        </div>
        <!--
        <div class="card mb-3 text-center"
             style="margin-left:auto;
                    margin-right:auto;
                    margin-top:1em;
                    max-width: 540px;">
            <div class="card-header">Votaciones</div>
            {% if poll %}
                {% if ticket.has_voted %}
                    <div class="card-body">
                        <h5 class="card-title">Muchas gracias por votar</h5>
                    </div>
                {% else %}
                    <div class="card-body">
                        <h5 class="card-title">¡Vota a tu grupo favorito!</h5>
                        <form method="POST" action="{% url 'vote_post' poll.id %}">
                            {% for value, label in form.options.field.choices %}
                                <div class="form-check">
                                    {% comment %} <label class="form-check-label">
              <input class="form-check-input" type="checkbox" value="{{ value }}" name="options">
              {{label}}
                                    </label> {% endcomment %}
                                    <input type="radio" name="options" id="vote-option{{ forloop.counter }}" value={{ value }} autocomplete="off">
                                    <label for="vote-option{{ forloop.counter }}">
                                        {% comment %} {% if option_pictures.value %}
                        <img src="{{option_pictures.value.url}}" style="height: 4em;" class="img-fluid rounded-start" alt="...">
                            {% else %}
                                        <img src="{% static 'img/perfil_defecto.png' %}"
                                             style="height: 4em;"
                                             class="img-fluid rounded-start"
                                             alt="...">{% endif %} {% endcomment %}
                                        {{ label }}
                                    </label>
                                </div>
                            {% endfor %}
                            {% csrf_token %}
                            <button type="button"
                                    class="btn btn-primary mt-3"
                                    data-bs-toggle="modal"
                                    data-bs-target="#confirmModal">¡VOTA!</button>
                            <div class="modal fade"
                                 id="confirmModal"
                                 tabindex="-1"
                                 role="dialog"
                                 aria-labelledby="Confirmation Modal"
                                 aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Confirmar cambios</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Cerrar">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">Tu voto se guardará y no podrás volver a votar en esta encuesta. ¿Continuar?</div>
                                        <div class="modal-footer">
                                            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
                                            <button type="submit" class="btn btn-primary">Enviar voto</button>
                                        </div>
                                    </div>
                                </div>
                            </form>
                        </div>
                    {% endif %}
                {% else %}
                
                    <div class="card-body">
                        <h5 class="card-title">Actualmente no hay votaciones abiertas</h5>
                        <p class="card-text">
                            Las votaciones se abrirán cuando acaben todas las bandas de tocar.
                        </p>
                    </div>
                    {% endif %}
                </div>
            </div>
        -->
            <footer class=" align-items-center py-3 my-4 text-center">
                <a href="https://cmisabel.ugr.es/scy"><img src="{% static 'img/home/scy.png' %}" class="scy-prompt"></a>
                <img src="{% static 'img/home/footer.png' %}" class="fest-footer">
            </footer>
        </div>
    {% endblock content %}
    {% block customcss %}
        <style>
    
    .fest-header {
        width: 100%;
        margin-bottom: 5vh;
        max-width: 700px;
    }
    body {
        display: -ms-flexbox;
        display: flex;
        -ms-flex-align: center;
        align-items: center;
        background-color: #FC6F78;
      }
    .container-sm{
        /*border-radius: 1em;*/
    }

    .event_logo{
        height : 100%;
    }

    @media (min-width: 768px) {
        
        .event_logo{
            height : 5em;
        } 
    }

    #profile-img{
      padding : 1em;
    }

    #edit-icon{
      height:1.5em;
    }

    #editNameIcon{
        height: 1em;
    }
    {% comment %} #edit-icon-container{
      z-index:30;
      position:absolute;
      bottom:1em;
      right:auto;
      left:15%;
    } {% endcomment %}

    .form-check {
        padding-left: inherit;
    }

    .btn {
        background-color: #3693c7;
    }

    .fest-points {
        font-size: 32px;
    }

    .fest-footer {
        width: 50%;
    }

    .scy-prompt {
        width: 80%;
        margin-bottom: 5vh;
    }

    .edit-icon {
        margin-left: 8px;
    }

        </style>
        <!---<link rel="stylesheet" href="{% static 'css/login.css' %}"> -->
    {% endblock customcss %}
    {% block customjs %}
        <script id="js-data" type="application/json">{"api_url": "/changename/{{ticket.qr_text}}/", "csrf" : "{{ csrf_token }}"}</script>
        <script src="{% static 'js/axios.min.js' %}"></script>
        <script src="{% static "js/tickets.js" %}"></script>
    {% endblock customjs %}
